<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Faltas - Calculhora</title>
    <meta name="description" content="Registra y gestiona tus faltas escolares de manera inteligente">
    <meta name="theme-color" content="#0d9488">
    
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="estilos/componentes/calendario.css">
    <link rel="stylesheet" href="estilos/componentes/modal.css">
    
    <!-- Favicon -->
    <link rel="icon" href="assets/img/logos/calculhora.png" type="image/png">
</head>
<body>
    <!-- HEADER SIMPLIFICADO -->
    <header class="header-calendario">
        <div class="container">
            <div class="header-content">
                <!-- Volver al inicio -->
                <a href="index.html" class="btn-volver">
                    ← Volver al inicio
                </a>
                
                <!-- Logo y título -->
                <div class="logo-titulo">
                    <img src="assets/img/logos/calculhora.png" alt="Calculhora" class="logo-small">
                    <h1>📝 Registro de Faltas</h1>
                </div>
                
                <!-- Acciones -->
                <div class="header-actions">
                    <button class="btn-nueva-falta" id="btnNuevaFalta">
                        ➕ Nueva Falta
                    </button>
                    <button class="btn-tema" id="btnTema">
                        🌙
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="main-calendario">
        <div class="container">
            
            <!-- ESTADÍSTICAS RÁPIDAS -->
            <section class="stats-rapidas">
                <div class="stat-card">
                    <div class="stat-numero" id="totalFaltas">0</div>
                    <div class="stat-label">Total Faltas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-numero" id="faltasEsteMes">0</div>
                    <div class="stat-label">Este Mes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-numero" id="categoriaFrecuente">-</div>
                    <div class="stat-label">Más Frecuente</div>
                </div>
                <div class="stat-card">
                    <div class="stat-numero" id="diasConsecutivos">0</div>
                    <div class="stat-label">Días Seguidos</div>
                </div>
            </section>

            <!-- CONTROLES DEL CALENDARIO -->
            <section class="controles-calendario">
                <button class="btn-nav" id="mesAnterior">‹</button>
                
                <div class="selector-fecha">
                    <h2 id="mesActual">Agosto 2025</h2>
                    <button class="btn-hoy" id="btnHoy">Hoy</button>
                </div>
                
                <button class="btn-nav" id="mesSiguiente">›</button>
            </section>

            <!-- CALENDARIO -->
            <section class="calendario-container">
                <div class="calendario" id="calendario">
                    <!-- Header días de la semana -->
                    <div class="dia-header">Dom</div>
                    <div class="dia-header">Lun</div>
                    <div class="dia-header">Mar</div>
                    <div class="dia-header">Mié</div>
                    <div class="dia-header">Jue</div>
                    <div class="dia-header">Vie</div>
                    <div class="dia-header">Sáb</div>
                    
                    <!-- Los días se generan con JavaScript -->
                </div>
            </section>

            <!-- LISTA DE FALTAS RECIENTES -->
            <section class="faltas-recientes">
                <div class="seccion-header">
                    <h3>📋 Faltas Recientes</h3>
                    <div class="filtros">
                        <select id="filtroCategoria" class="select-filtro">
                            <option value="todas">Todas las categorías</option>
                            <option value="enfermedad">🏥 Enfermedad</option>
                            <option value="transporte">🚌 Transporte</option>
                            <option value="personal">👨‍👩‍👧‍👦 Personal</option>
                            <option value="clima">⛈️ Clima</option>
                            <option value="otro">📝 Otro</option>
                        </select>
                    </div>
                </div>
                
                <div class="lista-faltas" id="listaFaltas">
                    <!-- Las faltas se generan con JavaScript -->
                    <div class="sin-faltas" id="sinFaltas">
                        <div class="sin-faltas-icon">📅</div>
                        <h4>No hay faltas registradas</h4>
                        <p>¡Perfecto! Mantienes una asistencia excelente.</p>
                        <button class="btn-primera-falta" onclick="abrirModalFalta()">
                            Registrar primera falta
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- MODAL NUEVA FALTA -->
    <div class="modal-overlay" id="modalNuevaFalta">
        <div class="modal">
            <div class="modal-header">
                <h3>📝 Registrar Nueva Falta</h3>
                <button class="modal-close" id="cerrarModal">×</button>
            </div>
            
            <form class="modal-body" id="formNuevaFalta">
                <div class="form-group">
                    <label for="fechaFalta">Fecha de la falta</label>
                    <input type="date" id="fechaFalta" name="fecha" required class="form-input">
                </div>
                
                <div class="form-group">
                    <label for="categoriaFalta">Categoría</label>
                    <select id="categoriaFalta" name="categoria" required class="form-input">
                        <option value="">Seleccionar categoría...</option>
                        <option value="enfermedad">🏥 Enfermedad</option>
                        <option value="transporte">🚌 Transporte</option>
                        <option value="personal">👨‍👩‍👧‍👦 Asuntos Personales</option>
                        <option value="clima">⛈️ Clima</option>
                        <option value="otro">📝 Otro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="materiaFalta">Materia (opcional)</label>
                    <input type="text" id="materiaFalta" name="materia" class="form-input" placeholder="Ej: Matemática, Historia...">
                </div>
                
                <div class="form-group">
                    <label for="motivoFalta">Motivo / Notas</label>
                    <textarea id="motivoFalta" name="motivo" class="form-textarea" rows="3" placeholder="Describe brevemente el motivo de la falta..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="faltaJustificada" name="justificada" class="form-checkbox">
                        Falta justificada
                    </label>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="cerrarModalFalta()">
                    Cancelar
                </button>
                <button type="submit" form="formNuevaFalta" class="btn-primary">
                    💾 Guardar Falta
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE FALTA -->
    <div class="modal-overlay" id="modalDetalleFalta">
        <div class="modal">
            <div class="modal-header">
                <h3>📋 Detalle de Falta</h3>
                <button class="modal-close" onclick="cerrarModalDetalle()">×</button>
            </div>
            
            <div class="modal-body detalle-falta">
                <div class="detalle-item">
                    <strong>Fecha:</strong>
                    <span id="detalleFecha">-</span>
                </div>
                
                <div class="detalle-item">
                    <strong>Categoría:</strong>
                    <span id="detalleCategoria" class="categoria-badge">-</span>
                </div>
                
                <div class="detalle-item">
                    <strong>Materia:</strong>
                    <span id="detalleMateria">-</span>
                </div>
                
                <div class="detalle-item">
                    <strong>Estado:</strong>
                    <span id="detalleEstado" class="estado-badge">-</span>
                </div>
                
                <div class="detalle-item">
                    <strong>Motivo:</strong>
                    <p id="detalleMotivo">-</p>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" onclick="editarFalta()">
                    ✏️ Editar
                </button>
                <button class="btn-danger" onclick="eliminarFalta()">
                    🗑️ Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- FOOTER SIMPLE -->
    <footer class="footer-calendario">
        <div class="container">
            <p>&copy; 2024 Calculhora - <a href="index.html">Volver al inicio</a></p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/componentes/modal.js"></script>
    <script src="js/componentes/calendario.js"></script>
</body>
</html>